/**!
 * Part of the jMediaelement-Project vpre1.3.5 | http://github.com/aFarkas/jMediaelement
 * @author Alexander Farkas
 * Copyright 2010, Alexander Farkas
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
(function(b){function x(){b.event.special.mediaerror.handler.apply(b(this).closest("video, audio")[0],arguments)}function C(a){if(b.support.mediaElements){var c=b.data(this,"mediaElemSupport");if(c&&c.apis){a&&a.type&&b.data(this,"calledMediaError",false);c=c.apis;a=this;var d=b.attr(this,"srces");if(a.error||d.length&&!c.nativ.canPlaySrces(d)){b.event.special.mediaerror.handler.call(this,b.Event("mediaerror"));try{a.pause()}catch(e){}}b("source",this).unbind("error",x).filter(":last").bind("error",
x)}}}function s(a,c){var d=a.nodeName.toLowerCase();c=j.getSuitedPlayers(a,c.apiOrder);var e=b.data(a,"mediaElemSupport");if(c)if(c==="noSource")e.noSource=true;else if(j._setAPIActive(a,c.name))e.apis[c.name]._mmload&&e.apis[c.name]._mmload(c.src,b.attr(a,"poster"));else j._embedApi(a,c,e,d);else{e.apis.nativ._trigger({type:"totalerror"});try{a.pause()}catch(f){}}}b.multimediaSupport={};var j=b.multimediaSupport,z=(new Date).getTime(),v=document,w=b("<video />")[0],i=!("webkitPreservesPitch"in w&&
parseFloat(b.browser.version,10)<535&&(navigator.userAgent.indexOf("Chrome")!==-1||navigator.userAgent.indexOf("Mac")===-1));b.support.video=!!w.canPlayType;b.support.autoBuffer=!!("autobuffer"in w);b.support.audio=!!b("<audio />")[0].canPlayType;w=null;b("<source />");b("<track />");b.support.mediaElements=b.support.video&&b.support.audio;b.support.dynamicHTML5=!!b("<video><div></div></video>")[0].innerHTML;b.support.mediaLoop="loop"in b("<video />")[0];b.browser.deprecatedPoster=!i;b.fixHTML5=function(){var a,
c;return b.support.dynamicHTML5?function(d){return d}:function(d){if(!a){c=document.body;a=document.createElement("div");a.style.display="none"}var e=a.cloneNode(false);c.appendChild(e);e.innerHTML=d;c.removeChild(e);return e.childNodes}}();var l=["float"];b.each(["Top","Left","Right","Bottom"],function(a,c){l.push("margin"+c);l.push("padding"+c);l.push("border"+c+"Width");setTimeout(function(){j._transferStyles.push("border"+c+"Color");j._transferStyles.push("border"+c+"Style")},1)});b.fn.getDimensions=
function(){var a={width:0,height:0};if(this[0]){var c=this,d=this[0].style;a.height=d.height||this.height();a.width=d.width||this.width();b.each(l,function(e,f){a[f]=d[f]||c.css(f)})}return a};var m=b.attr,p=/video|audio|source/i,o={src:1,poster:1},n={loop:1,autoplay:1,controls:1},A={srces:1,getConfig:1,preload:1},q={auto:1,metadata:1,none:1},t={change:function(a,c,d){if(b.support.mediaElements){var e=a.getAttribute("preload")||"metadata";if(d||c!==e)if(i){if(b.support.autoBuffer)a.autobuffer=c===
"auto"}else if(c==="none"||e==="none"&&(c==="auto"||!a.getAttribute("poster"))){b(a).unbind("play",t.changePlayMode);c==="none"&&b(a).bind("play",t.changePlayMode);b.attr(a,"srces",b.attr(a,"srces"),c)}}},changeAutoplay:function(a,c){if(b.support.mediaElements&&!i&&b.attr(a,"preload")==="none"&&c!==b.attr(a,"autoplay")){var d=b.attr(a,"srces");b.attr(a,"srces",d,"auto");d.length&&c&&setTimeout(function(){a.play&&b(a).getMediaAPI()==="nativ"&&a.play()},9)}},changePlayMode:function(){t.changeAutoplay(this,
true)},addSrces:function(a,c,d){if(i||!b.support.mediaElements)return false;d=d||b.attr(a,"preload");b(a).unbind("play",t.changePlayMode);if(d==="auto"||b.attr(a,"autoplay"))return b.data(a,"jme-srces",false);b(a).bind("play",t.changePlayMode);b.data(a,"jme-srces",c);return true}};b.attr=function(a,c,d,e){if(!(a.nodeName&&p.test(a.nodeName)&&(A[c]||n[c]||o[c])))return m(a,c,d,e);var f;if(d===undefined){if(n[c])return typeof a[c]==="boolean"?a[c]:!!(a.attributes[c]||{}).specified;if(o[c])return b.support.video&&
a[c]||j.makeAbsURI(a.getAttribute(c));switch(c){case "srces":if(f=b.data(a,"jme-srces"))break;if(f=b.attr(a,"src"))f=[{src:f,type:a.getAttribute("type"),media:a.getAttribute("media")}];else{f=[];b("source",a).each(function(){f.push({src:b.attr(this,"src"),type:this.getAttribute("type"),media:this.getAttribute("media")})});f.length||b("a.source",a).each(function(){f.push({src:this.href,type:this.getAttribute("type"),media:this.getAttribute("data-media")})})}break;case "getConfig":f={};b.each(["autoplay",
"loop","controls","poster","preload"],function(g,h){f[h]=b.attr(a,h)});break;case "preload":f=a.preload||a.getAttribute("preload");if(f==="")f="auto";q[f]||(f="metadata");break}return f}else if(n[c]){d=!!d;a[c]=d;c==="autoplay"&&t.changeAutoplay(a,d);if(d){a[c]=d;a.setAttribute(c,c)}else{a[c]=d;a.removeAttribute(c)}}else if(o[c])a.setAttribute(c,d);else if(c==="srces"){b("source, a.source",a).remove();a.removeAttribute("src");d=b.isArray(d)?d:[d];t.addSrces(a,d,e)||b.each(d,function(g,h){f=v.createElement("source");
if(typeof h==="string")h={src:h};f.setAttribute("src",h.src);h.type&&f.setAttribute("type",h.type);h.media&&f.setAttribute("media",h.media);a.appendChild(f)})}else if(c==="getConfig")b.each(d,function(g,h){b.attr(a,g,h)});else if(c==="preload"){if(d==="")d="auto";else q[d]||(d="metadata");t.change(a,d,e);a.setAttribute(c,d)}};b.event.special.mediaerror={setup:function(){var a=b(this).bind("error",b.event.special.mediaerror.handler).bind("native_mediareset",C);setTimeout(function(){a.each(C)},0)},
teardown:function(){b(this).unbind("error",b.event.special.mediaerror.handler).find("source").unbind("error",x)},handler:function(a){if(!b.data(this,"calledMediaError")){a=b.extend({},a||{},{type:"mediaerror"});b.data(this,"calledMediaError",true);return b.event.handle.apply(this,arguments)}}};j.getExt=function(a){var c=a.indexOf("?"),d="";a=c>0?a.substring(0,c):a;c=a.lastIndexOf(".")+1;return(d=a.substr(c))&&d.toLowerCase?d.toLowerCase():d};var y=j.getExt,r={audio:{"audio/ogg":["ogg","oga","ogm"],
"audio/mpeg":["mp2","mp3","mpga","mpega"],"audio/mp4":["mp4","mpg4","m4r"],"audio/wav":["wav"],"audio/x-m4a":["m4a"],"audio/x-m4p":["m4p"],"audio/3gpp":["3gp","3gpp"],"audio/webm":["webm"]},video:{"video/ogg":["ogg","ogv","ogm"],"video/mpeg":["mpg","mpeg","mpe"],"video/mp4":["mp4","mpg4","m4v"],"video/quicktime":["mov","qt"],"video/x-msvideo":["avi"],"video/x-ms-asf":["asf","asx"],"video/flv":["flv","f4v"],"video/3gpp":["3gp","3gpp"],"video/webm":["webm"]}};b.extend(j,{jsPath:function(){var a=b("script");
a=a[a.length-1].src.split("?")[0];return a.slice(0,a.lastIndexOf("/")+1)}(),extendWithData:function(){var a={string:1,number:1,"boolean":1};return function(c,d,e){e||(e=d);b.each(e,b.isArray(e)?function(f,g){j.getData(c,g,d)}:function(f,g){a[typeof g]&&j.getData(c,f,d)});return d}}(),getData:function(){var a=function(c,d){c=c.getAttribute("data-"+d);if(!(!c&&c!==""))return c*1==c?parseFloat(c,10):c==="false"?false:c==="true"?true:c};return function(c,d,e){var f=d;e=e||{};if(typeof d==="string")d=
[f];b.each(d,b.isArray(d)?function(g,h){g=a(c,h);if(g!==undefined)e[h]=g}:function(g){var h=a(c,g);if(h!==undefined)e[g]=h});return e}}(),registerMimetype:function(a,c){arguments.length===1?b.each(r,function(d){j.registerMimetype(d,a)}):b.each(c,function(d,e){if(r[a][d])r[a][d]=[];r[a][d]=r[a][d].concat(e)})},_showMimeTypes:function(){window.console&&console.log(r)},add:function(a,c,d){if(!this.apis[c][a]){this.apis[c][a]=j.beget(this.fn);a!=="nativ"&&b.inArray(a,b.fn.jmeEmbed.defaults.apiOrder)===
-1&&b.fn.jmeEmbed.defaults.apiOrder.push(a)}b.extend(true,this.apis[c][a],d)},fn:{_init:b.noop,canPlayType:function(a){var c=this.apiElem,d;if(c&&c.canPlayType){d=c.canPlayType(a);return d==="no"?"":d}a=j.extractContainerCodecsFormType(a);var e=this;d="probably";if(!a[1])return this.canPlayContainer&&b.inArray(a[0],this.canPlayContainer)!==-1?"maybe":"";b.each(a[1],function(f,g){if(!e.canPlayCodecs||b.inArray(g,e.canPlayCodecs)===-1){d="";return false}});return d},canPlaySrc:function(a){var c=this;
if(typeof a!=="string"){if(a.type)return this.canPlayType(a.type);a=a.src}var d=y(a),e="";b.each(r[this.nodeName],function(f,g){if(b.inArray(d,g)!==-1){e=c.canPlayType(f);return false}});return e},canPlaySrces:function(a){a=a||b.attr(this.element,"srces");b.isArray(a)||(a=[a]);var c=this,d=false,e="";b.each(a,function(f,g){if(d=c.canPlaySrc(g)){e=g;return false}});return e},_setActive:b.noop,_setInactive:b.noop,_trigger:function(a){b(this.element).triggerHandler(a,a)}},apis:{audio:{},video:{}},extractContainerCodecsFormType:function(a){a=
a.split(/\s*;\s*/g);if(a[1]&&a[1].indexOf("codecs")!==-1)a[1]=a[1].replace(/["|']$/,"").replace(/^\s*codecs=('|")/,"").split(/\s*,\s*/g);return a},makeAbsURI:function(){return function(a){if(a&&typeof a==="string")a=b('<a href="'+a+'"></a>')[0].href;return a}}(),beget:function(a){var c=function(){};c.prototype=a;return new c},_create:function(a,c,d,e){var f=b.data(d,"mediaElemSupport")||b.data(d,"mediaElemSupport",{apis:{},nodeName:a});if(!f.apis[c]){f.apis[c]=j.beget(j.apis[a][c]);f.apis[c].element=
d;f.apis[c].nodeName=a;f.apis[c].name=c;f.apis[c].data={};f.apis[c].embedOpts=e}return f},_transferStyles:["backgroundColor","backgroundPosition","backgroundImage","backgroundRepeat","background-attachment"],_setAPIActive:function(a,c){var d=b.data(a,"mediaElemSupport"),e=d.name;if(e===c)return true;var f=d.apis[e].apiElem,g=d.apis[c]&&d.apis[c].apiElem,h=false;if(g&&g.nodeName){if(d.nodeName!=="audio"||b.attr(a,"controls"))c==="nativ"?d.apis[c].visualElem.css({display:""}):d.apis[c].visualElem.css(b.extend({visibility:""},
d.apis[e].visualElem.getDimensions()));d.apis[c]._setActive(e);h=true;d.apis[c]._trigger({type:"apiActivated",api:c});if(d.apis[e]){d.apis[e]._volumelevelState!==undefined&&b(a).volumelevel(d.apis[e]._volumelevelState);d.apis[e]._muteState!==undefined&&b(a).muted(d.apis[e]._muteState);d.apis[e].visualElem&&b.each(j._transferStyles,function(k,u){d.apis[c].visualElem.css(u,d.apis[e].visualElem.css(u))})}}d.apis[c].isAPIActive=true;if(f&&f.nodeName){if(e==="nativ")f.style.display="none";else d.apis[e].visualElem.css({height:0,
width:0,visibility:"hidden"});d.apis[e]._setInactive(c);d.apis[e].isAPIActive=false;d.apis[c]._trigger({type:"apiDeActivated",api:e})}d.name=c;return h},getSuitedPlayers:function(a,c){var d=b.data(a,"mediaElemSupport");if(d&&d.apis){d=d.apis;var e=b.attr(a,"srces"),f=false,g=function(h,k){if(!(typeof k.isTechAvailable==="boolean"&&!k.isTechAvailable||b.isFunction(k.isTechAvailable)&&!k.isTechAvailable())){if(k=k.canPlaySrces(e))f={src:k.src||k,name:h};return f}};if(!e.length)return"noSource";c?b.each(c,
function(h,k){return!g(k,d[k])}):b.each(d,function(h,k){return!g(h,k)});return f}},_embedApi:function(a,c,d){var e=b.attr(a,"getConfig"),f=b(a),g=a.id,h=f.attr("aria-labelledby");if(!g){z++;g=d.nodeName+"-"+z;a.id=g}d.apis[c.name].visualElem=b('<div class="media-element-box mm-'+d.nodeName+'-box" style="position: relative;" />').insertBefore(a);h&&d.apis[c.name].visualElem.attr({role:"group","aria-labelledby":h});if(d.nodeName==="audio"&&!e.controls)d.apis[c.name].visualElem.css({height:0,width:0});
else{d.apis[c.name].visualElem.css(f.getDimensions());b.each(j._transferStyles,function(k,u){d.apis[c.name].visualElem.css(u,f.css(u))})}d.apis[c.name]._embed(c.src,d.name+"-"+g,e,function(k){d.apis[c.name].apiElem=k;b(k).addClass(d.nodeName);e.controls||b(k).attr({tabindex:"-1",role:"presentation"});d.apis[c.name]._init();d.apis[c.name]._trigger({type:"apiActivated",api:c.name})})},getPluginVersion:function(a,c){c=c||navigator.plugins&&navigator.plugins[a];a=[-1,0];if(c)if((c=(c.description||"").replace(/,/g,
".").match(/(\d+)/g)||["0"])&&c[0]){a[0]=c[0];if(c[1])a[0]+="."+c[1];a[0]=parseFloat(a[0],10);if(c[2])a[1]=parseInt(c[2],10)}return a},embedObject:function(a,c,d,e,f){a.style.overflow="hidden";a=b("<div />").prependTo(a)[0];var g;if(navigator.plugins&&navigator.plugins.length){g=v.createElement("object");b.each(d,function(h,k){g.setAttribute(h,k)});b.each(e,function(h,k){var u=v.createElement("param");u.setAttribute("name",h);u.setAttribute("value",k);g.appendChild(u)});g.setAttribute("id",c);g.setAttribute("name",
c);if(e.wmode==="transparent"){g.style.minHeight="1px";g.style.minHeight="1px"}a.parentNode.replaceChild(g,a)}else if(window.ActiveXObject){g='<object style="width: 100%; height: 100%; width="100%" height="100%"';b.each(b.extend({},d,f),function(h,k){g+=" "+h+'="'+k+'"'});g+=' name="'+c+'"';g+=' id="'+c+'"';g+=">";b.each(e,function(h,k){g+=' <param name="'+h+'" value="'+k+'" />'});g+="</object>";a.outerHTML=g;g=v.getElementById(c)}if(g){g.setAttribute("width","100%");g.setAttribute("height","100%")}b(window).unload(function(){jQuery.cleanData([g]);
g=null});setTimeout(function(){if(g&&g.style){g.style.width="100%";g.style.height="100%"}},0);return g}});j.add("nativ","video",{});j.add("nativ","audio",{});var B=function(){var a=b(this).hide().children(":not(source, track)").clone().insertAfter(this);b(this).one("mediareset",function(){b(this).show();a.remove()})};b.fn.jmeEmbed=function(a){a=b.extend(true,{},b.fn.jmeEmbed.defaults,a);a.showFallback&&b.support.mediaElements&&this.bind("totalerror",B);return this.each(function(){var c=this.nodeName.toLowerCase(),
d=false,e=this;if(!(c!=="video"&&c!=="audio"||b.support.flash9&&b.nodeName(e.parentNode,"object"))){b("object, embed",this).each(function(){b("> *:not(param, embed, object)",this).appendTo(e)}).remove();b(this).trigger("jmeBeforeEmbed",{options:a,nodeName:c});a.removeControls&&b.attr(this,"controls",false);var f=j._create(c,"nativ",this,a);f.name="nativ";f.apis.nativ.apiElem=this;f.apis.nativ.visualElem=b(this);f.apis.nativ.isAPIActive=true;b.each(j.apis[c],function(g){g!=="nativ"&&j._create(c,g,
e,a)});b(this).bind("mediaerror",function(){f.name==="nativ"&&s(this,a)});if(b.support.flash9&&a.activateFlash&&a.flashPlayer){d=j.getSuitedPlayers(e,[a.flashPlayer]);if(d=="noSource")d={name:a.flashPlayer};f.apis.nativ.isAPIReady=true;if(d.name==a.flashPlayer&&!j._setAPIActive(this,a.flashPlayer))j._embedApi(this,d,f,c);else d=false}if(!d)if(a.debug||!b.support.mediaElements){s(this,a);f.apis.nativ.isAPIReady=true}else f.apis.nativ._init();b.attr(this,"preload",b.attr(this,"preload"),true);b(this).trigger("jmeEmbed",
{options:a,nodeName:c,data:f})}})};b.fn.jmeEmbed.defaults={debug:false,removeControls:false,showFallback:false,apiOrder:[],activateFlash:false,flashPlayer:""};b.fn.mediaElementEmbed=b.fn.jmeEmbed;if(b.cleanData&&window.ActiveXObject){var D=b.cleanData;b.cleanData=function(a){D(a);for(var c=0,d=a.length;c<d;c++)if(a[c].nodeName==="OBJECT")try{for(var e in a[c])if(typeof a[c][e]==="function")a[c][e]=null}catch(f){}}}})(jQuery);
(function(b){var x={type:"application/x-shockwave-flash"},C={classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},s=b.multimediaSupport;b.extend(b.fn.jmeEmbed.defaults,{flashPlayer:"jwPlayer",jwPlayer:{path:s.jsPath+"player.swf",hideIcons:"auto",vars:{},attrs:{},plugins:{},params:{allowscriptaccess:"always",allowfullscreen:"true"}}});b(function(){var i=(b("script.jwPlayer")[0]||{}).src;if(i)b.fn.jmeEmbed.defaults.jwPlayer.path=i});var j={A:/&amp;/g,a:/&/g,e:/\=/g,q:/\?/g},z={audio:"sound",video:"video"},
v=function(i){return i.replace?i.replace(j.A,"%26").replace(j.a,"%26").replace(j.e,"%3D").replace(j.q,"%3F"):i};(function(){b.support.flash9=false;b.support.flashVersion=0;var i=s.getPluginVersion("Shockwave Flash"),l=function(p){b.support.flash9=false;try{if(p&&typeof p.GetVariable!=="undefined"){var o=p.GetVariable("$version");p=s.getPluginVersion("",{description:o});b.support.flashVersion=p[0];b.support.flash9=!!(p[0]>9||p[0]===9&&p[1]>=115)}}catch(n){}};if(i&&i[0])b.support.flashVersion=i[0];
if(i[0]>9||i[0]===9&&i[1]>=115){b.support.flash9=true;b(function(){i=b("<object />",x).appendTo("body");l(i[0]);i.remove()})}else if(window.ActiveXObject)try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");l(i);i=null}catch(m){}})();var w={isTechAvailable:function(){return b.support.flash9},_extendJWLoad:function(i,l,m){if(i){m=m||this.element;var p=this.embedOpts.jwPlayer.changeVars;s.extendWithData(m,l,["type","provider","stretching","bufferlength","streamer"]);l.file=(m.getAttribute("data-jwprefixsrc")||
"")+l.file;var o=s.getExt(i),n=o=="m4r"?"video":this.nodeName;if(o=="m4r"||!this.canPlaySrc(i)){if(!l.provider)l.provider=z[n];if(!l.type)l.type=z[n]}p&&p(i,l,m,this);return l}},_embed:function(i,l,m,p){var o=this.embedOpts.jwPlayer,n=b.extend({},o.vars,{file:i,id:l}),A=b.extend({name:l},o.attrs,x,!window.ActiveXObject?{data:o.path}:{}),q=b.extend({movie:o.path},o.params),t=[],y=this;this._extendJWLoad(i,n);if(m.poster)n.image=m.poster;n.autostart=""+m.autoplay;n.repeat=m.loop?"single":"false";n.controlbar=
m.controls?"bottom":"none";if(!m.controls&&this.nodeName!=="audio"&&q.wmode===undefined)q.wmode="transparent";if(!m.controls&&o.hideIcons&&q.wmode==="transparent"||o.hideIcons===true){n.icons="false";n.showicons="false"}if(q.wmode==="transparent"&&!n.screencolor&&!A.bgcolor){n.screencolor="ffffffff";A.bgcolor="#000000"}q.flashvars=[];b.each(n,function(r,B){q.flashvars.push(v(r)+"="+v(B))});b.each(o.plugins,function(r,B){t.push(B)});t.length&&q.flashvars.push("plugins="+t.join(","));q.flashvars=q.flashvars.join("&");
p(s.embedObject(this.visualElem[0],l,A,q,C,"Shockwave Flash"));setTimeout(function(){var r=b("object",y.visualElem)[0];if(!r||r.style.display==="none"&&b("> *",y.visualElem).length>1){b("div[bgactive]",y.visualElem).css({width:"100%",height:"100%"});y._trigger("flashblocker")}},9)},canPlaySrc:function(i){var l=s.fn.canPlaySrc.apply(this,arguments),m=-1;m=i.src||i;if(!l&&typeof m==="string"){m=m.indexOf("youtube.com/");if(m<15&&m>6)l="maybe"}return l},canPlayCodecs:["avc1.42E01E","mp4a.40.2","avc1.58A01E",
"avc1.4D401E","avc1.64001E","VP6","mp3","AAC"],canPlayContainer:["video/3gpp","video/x-msvideo","video/quicktime","video/x-m4v","video/mp4","video/m4p","video/x-flv","video/flv","audio/mpeg","audio/aac","audio/mp4","audio/x-m4a","audio/m4a","audio/mp3","audio/x-fla","audio/fla","youtube/flv","jwplayer/jwplayer"]};s.add("jwPlayer","video",w);s.add("jwPlayer","audio",w)})(jQuery);
