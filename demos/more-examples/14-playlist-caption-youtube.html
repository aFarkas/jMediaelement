<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Youtube playlist Demo</title>
		<link rel="stylesheet" href="../css/styles.css" />
		
		<link class="ui-theme" rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/themes/redmond/jquery-ui.css"/>
		<link rel="stylesheet" href="../css/player-controls.css" />
		
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
		
		<!-- ui-components -->
		<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
		<!-- END:  ui-components -->
		
		<!-- for a11y-slider -->
		<script src="../../utils/a11y-slider.ext.js"></script>
		<!-- END: for a11y-slider -->
		
		<!-- full jme script -->
		<!-- configure path to swf-fallback: script.jwPlayer[src] -->
		<script class="jwPlayer" type="application/swf" src="../../packages/player.swf"></script>
        <script src="../../packages/mm.full.min.js"></script>
		<!-- END: jme -->
		
		<script src="../../plugins/playlist.js"></script>
		<script src="../../plugins/timerange.js"></script>
		<script src="../../plugins/track.js"></script>
		<!-- fullwindow plugin -->
		<script class="jme-jwPlayer" type="application/swf" src="../../packages/jmefs.swf"></script>
		<script src="../../plugins/fullwindow.js"></script>
		<!-- fullwindow plugin -->
		
		<!-- useractivity -->
		<script src="../../utils/useractivity.js"></script>
		<style>
			/*overlay controls*/
			.media-controls-wrapper {
				position: absolute;
				bottom: 0;
				width: 100%;
			}
			/* position the fullscreen-button */
			div.volume-slider {
				right: 46px;
				width: 60px;
			}
			.fullscreen {
				right: 8px;
			}
			
			/* prepare fullscreen-button for flash fullscreen in modern browsers */
			html > body .media-state {
				height: auto;
				top: 0;
				bottom: 2em;
			}
			.jme-flashbutton-wrapper .media-controls-wrapper {
				pointer-events: none;
			}
			
			.jme-flashbutton-wrapper .media-controls > *:not(.fullscreen) {
				pointer-events: auto;
			}
			
			.track-display {
				position: absolute;
				width: 100%;
				margin-bottom: 2.6em;
				bottom: 0;
				text-align: center;
			}
			.track-display div {
				display: inline-block;
				padding: 3px;
				background-color: #000;
				background: rgba(0, 0, 0, 0.75);
				color: #fff;
			}
			/* track-display in fullscreen */
			.wraps-fullscreen .track-display div {
				padding: 5px;
				font-size: 200%;
			}
			.wraps-fullscreen .media-controls {
				position: absolute;
				bottom: 0;
				left: 0;
				right: 0;
				width: auto;
				z-index: 99999;
			}
		</style>
		<script>
			$('html').addClass('js-on');
			$(function(){
				
				$('div.media-player')
					.jmeControl()
					//useractive/userinactive event is provided by utils/useractivity.js plugin
					.bind('useractive', function(){
						$('div.media-controls', this).stop().animate({opacity: 1});
					})
					.bind('userinactive', function(){
						$('div.media-controls', this).stop().animate({opacity: 0});
					})
					//playlist + caption
					//you have to call this after jmeControl
					.each(function(){
						//get references
						var list = $('div.playlist', this);
						var media = $('video, audio', this);
						
						var changeCaption = function(){
							var trackData = list.find('li.ui-state-active').data('track');
							var track = $('a.track[href="'+ trackData.href +'"]');
							if(!track[0]){
								track = $('<a class="track" />')
									.attr( trackData )
									.appendTo(media)
								;
							}
							media.enableTrack(track);
						};
						
						$(this).bind('playlistitemchange', changeCaption);
						changeCaption();
					})
					.find('div.media-controls')
					.css('opacity', 0)
				;
			});
			
		</script>
		
	</head>
	<body>
		<h1>Demo with playlist-plugin and youtube videos</h1>
		<p>This demo adds the fullwindow plugin, the playlist plugin, the useractivity-event plugin and a fallback message to our <a href="../markup-controls.html">standard example using jmeControl</a>.</p>
		<p>It also demonstrates the flash-fullscreen feature, in borwsers, wich supports the <a href="https://developer.mozilla.org/en/css/pointer-events">CSS3 pointer-events</a>, especially FF3.6.</p>
		<div class="media-player">
			<h3 class="media-label"><span class="media-role">videoplayer: </span><span class="media-name">html5 videos from youtube</span></h3>
			<div class="video-box">
				<video>
					<div class="fallback">
						<div class="fallback-text">
							<p>Please install <a href="http://get.adobe.com/flashplayer/">Flash-Plugin</a></p>
						</div>
					</div>
				</video>
				<div class="media-state"></div>
				<div class="media-controls-wrapper">
					<div class="media-controls">
						<a class="play-pause" title="play / pause"><span class="ui-icon ui-icon-play"> </span><span class="button-text">play / pause</span></a>
						<span class="current-time player-display" title="current position">00:00</span>
						<div class="timeline-slider">
							<span class="handle-label">play position</span>
							<span class="ui-slider-handle" title="play position"></span>
							<div class="progressbar"></div>
						</div>
						<span class="duration player-display" title="duration">00:00</span>
						<a class="mute-unmute" title="mute / unmute"><span class="ui-icon ui-icon-volume-on"> </span><span class="button-text">mute / unmute</span></a>
						<div class="volume-slider"><span class="handle-label">volume control</span><span class="ui-slider-handle" title="volume control"></span></div>
						<a class="fullscreen button"><span class="ui-icon ui-icon-circle-zoomin"> </span><span class="button-text">zoomin</span></a>
					</div>
				</div>
			</div>
			
			
			<div class="playlist">
				<ul>
					<li class="play-item" data-track='{"href": "caption.xml", "type": "application/ttaf+xml"}'>
						<a href="http://www.youtube.com/watch?v=siOHh0uzcuY">
							<img src="http://i4.ytimg.com/vi/siOHh0uzcuY/default.jpg" alt="" />
							 Introduction to HTML 5
						</a>
					</li>
					<li class="play-item" data-track='{"href": "test.srt", "type": "text/srt"}'>
						<a href="http://www.youtube.com/watch?v=xIxDJof7xxQ">
							<img src="http://i1.ytimg.com/vi/xIxDJof7xxQ/default.jpg" alt="" />
							  HTML 5: Features you want desperately but still can't
						</a>
					</li>
					<li class="play-item" data-track='{"href": "caption.xml", "type": "application/ttaf+xml"}'>
						<a href="http://www.youtube.com/watch?v=poHqoBKiSeY">
							<img src="http://i1.ytimg.com/vi/poHqoBKiSeY/default.jpg" alt="" />
								WebM Open Video Playback in HTML5 - Google I/O 2010
						</a>
					</li>
				</ul>
			</div>
		</div>
		<p>(c) copyright Blender Foundation | <a href="http://www.bigbuckbunny.org">www.bigbuckbunny.org</a></p>
		<script>
			if(location.protocol === 'file:'){
				$('<small class="flash-hint"><strong>Youtube videos only work in an http-enviroment!</strong> Note that you have to <a href="http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html">add your development directory to the local trusted security sandbox</a>, to get the controls work with the flash backend</small>')
					.css({opacity: 0})
					.insertAfter('div.media-player')
					.fadeTo(1500, 1)
					.delay(19000)
					.fadeOut(3900, function(){
						$(this).remove();
					})
				;
			}
		</script>
	</body>
</html>
